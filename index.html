<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalkulator Multi-Fungsi</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 500px;
            width: 100%;
            overflow: hidden;
        }

        .tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 2px solid #e9ecef;
        }

        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            background: #f8f9fa;
            border: none;
            font-size: 14px;
            font-weight: 600;
            color: #6c757d;
            transition: all 0.3s;
        }

        .tab:hover {
            background: #e9ecef;
        }

        .tab.active {
            background: white;
            color: #667eea;
            border-bottom: 3px solid #667eea;
        }

        .content {
            padding: 30px;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Scientific Calculator */
        .calc-display {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: right;
            font-size: 24px;
            font-weight: bold;
            min-height: 60px;
            word-wrap: break-word;
            color: #333;
        }

        .calc-buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
        }

        .calc-btn {
            padding: 20px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            background: #f8f9fa;
            color: #333;
        }

        .calc-btn:hover {
            background: #e9ecef;
            transform: translateY(-2px);
        }

        .calc-btn:active {
            transform: translateY(0);
        }

        .calc-btn.operator {
            background: #667eea;
            color: white;
        }

        .calc-btn.operator:hover {
            background: #5568d3;
        }

        .calc-btn.equals {
            background: #28a745;
            color: white;
            grid-column: span 2;
        }

        .calc-btn.equals:hover {
            background: #218838;
        }

        .calc-btn.clear {
            background: #dc3545;
            color: white;
        }

        .calc-btn.clear:hover {
            background: #c82333;
        }

        /* Converter */
        .converter-group {
            margin-bottom: 25px;
        }

        .converter-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        .converter-group input,
        .converter-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 16px;
            transition: border 0.3s;
        }

        .converter-group input:focus,
        .converter-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .convert-btn {
            width: 100%;
            padding: 15px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 15px;
        }

        .convert-btn:hover {
            background: #5568d3;
            transform: translateY(-2px);
        }

        .result {
            margin-top: 20px;
            padding: 20px;
            background: #d4edda;
            border-radius: 10px;
            text-align: center;
            font-size: 18px;
            font-weight: 600;
            color: #155724;
            display: none;
        }

        .result.show {
            display: block;
            animation: fadeIn 0.3s;
        }

        h3 {
            color: #667eea;
            margin-bottom: 20px;
            text-align: center;
        }

        .waris-result-item {
            background: white;
            padding: 15px;
            margin: 10px 0;
            border-radius: 10px;
            border-left: 4px solid #667eea;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .waris-result-item h4 {
            color: #333;
            margin-bottom: 5px;
            font-size: 16px;
        }

        .waris-result-item p {
            color: #666;
            margin: 3px 0;
            font-size: 14px;
        }

        .waris-result-item .bagian {
            color: #667eea;
            font-weight: bold;
            font-size: 16px;
        }

        input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
            margin-right: 10px;
            vertical-align: middle;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="tabs">
            <button class="tab active" onclick="switchTab('scientific')">Scientific</button>
            <button class="tab" onclick="switchTab('panjang')">Panjang</button>
            <button class="tab" onclick="switchTab('berat')">Berat</button>
            <button class="tab" onclick="switchTab('waris')">Waris</button>
        </div>

        <div class="content">
            <!-- Scientific Calculator -->
            <div id="scientific" class="tab-content active">
                <h3>Scientific Calculator</h3>
                <div class="calc-display" id="display">0</div>
                <div class="calc-buttons">
                    <button class="calc-btn" onclick="appendNumber('7')">7</button>
                    <button class="calc-btn" onclick="appendNumber('8')">8</button>
                    <button class="calc-btn" onclick="appendNumber('9')">9</button>
                    <button class="calc-btn operator" onclick="appendOperator('/')">÷</button>
                    
                    <button class="calc-btn" onclick="appendNumber('4')">4</button>
                    <button class="calc-btn" onclick="appendNumber('5')">5</button>
                    <button class="calc-btn" onclick="appendNumber('6')">6</button>
                    <button class="calc-btn operator" onclick="appendOperator('*')">×</button>
                    
                    <button class="calc-btn" onclick="appendNumber('1')">1</button>
                    <button class="calc-btn" onclick="appendNumber('2')">2</button>
                    <button class="calc-btn" onclick="appendNumber('3')">3</button>
                    <button class="calc-btn operator" onclick="appendOperator('-')">-</button>
                    
                    <button class="calc-btn" onclick="appendNumber('0')">0</button>
                    <button class="calc-btn" onclick="appendNumber('.')">.</button>
                    <button class="calc-btn clear" onclick="clearDisplay()">C</button>
                    <button class="calc-btn operator" onclick="appendOperator('+')">+</button>
                    
                    <button class="calc-btn operator" onclick="calculateSin()">sin</button>
                    <button class="calc-btn operator" onclick="calculateCos()">cos</button>
                    <button class="calc-btn operator" onclick="calculateTan()">tan</button>
                    <button class="calc-btn operator" onclick="calculateSqrt()">√</button>
                    
                    <button class="calc-btn operator" onclick="calculateSquare()">x²</button>
                    <button class="calc-btn operator" onclick="appendOperator('^')">xⁿ</button>
                    <button class="calc-btn operator" onclick="calculatePercent()">%</button>
                    <button class="calc-btn operator" onclick="deleteLast()">⌫</button>
                    
                    <button class="calc-btn equals" onclick="calculate()">=</button>
                    <button class="calc-btn operator" onclick="appendNumber('(')">(</button>
                    <button class="calc-btn operator" onclick="appendNumber(')')">)</button>
                </div>
            </div>

            <!-- Konversi Panjang -->
            <div id="panjang" class="tab-content">
                <h3>Konversi Panjang</h3>
                <div class="converter-group">
                    <label>Nilai:</label>
                    <input type="number" id="panjangInput" placeholder="Masukkan nilai">
                </div>
                <div class="converter-group">
                    <label>Dari:</label>
                    <select id="panjangFrom">
                        <option value="km">Kilometer (km)</option>
                        <option value="m">Meter (m)</option>
                        <option value="cm">Centimeter (cm)</option>
                    </select>
                </div>
                <div class="converter-group">
                    <label>Ke:</label>
                    <select id="panjangTo">
                        <option value="km">Kilometer (km)</option>
                        <option value="m">Meter (m)</option>
                        <option value="cm">Centimeter (cm)</option>
                    </select>
                </div>
                <button class="convert-btn" onclick="convertPanjang()">Konversi</button>
                <div class="result" id="panjangResult"></div>
            </div>

            <!-- Konversi Berat -->
            <div id="berat" class="tab-content">
                <h3>Konversi Berat</h3>
                <div class="converter-group">
                    <label>Nilai:</label>
                    <input type="number" id="beratInput" placeholder="Masukkan nilai">
                </div>
                <div class="converter-group">
                    <label>Dari:</label>
                    <select id="beratFrom">
                        <option value="ton">Ton</option>
                        <option value="kwintal">Kwintal</option>
                        <option value="kg">Kilogram (kg)</option>
                        <option value="g">Gram (g)</option>
                    </select>
                </div>
                <div class="converter-group">
                    <label>Ke:</label>
                    <select id="beratTo">
                        <option value="ton">Ton</option>
                        <option value="kwintal">Kwintal</option>
                        <option value="kg">Kilogram (kg)</option>
                        <option value="g">Gram (g)</option>
                    </select>
                </div>
                <button class="convert-btn" onclick="convertBerat()">Konversi</button>
                <div class="result" id="beratResult"></div>
            </div>

            <!-- Kalkulator Waris Islam -->
            <div id="waris" class="tab-content">
                <h3>Kalkulator Waris Islam</h3>
                <div class="converter-group">
                    <label>Total Harta Warisan (Rp):</label>
                    <input type="number" id="totalHarta" placeholder="Masukkan total harta">
                </div>
                
                <h4 style="margin: 20px 0 10px 0; color: #667eea; font-size: 16px;">Ahli Waris:</h4>
                
                <div class="converter-group">
                    <label>
                        <input type="checkbox" id="suami" onchange="toggleWarisInput('suami')"> Suami
                    </label>
                    <input type="number" id="suamiJumlah" style="display:none; margin-top:5px;" placeholder="Jumlah" value="1" disabled>
                </div>

                <div class="converter-group">
                    <label>
                        <input type="checkbox" id="istri" onchange="toggleWarisInput('istri')"> Istri
                    </label>
                    <input type="number" id="istriJumlah" style="display:none; margin-top:5px;" placeholder="Jumlah" value="1" min="1">
                </div>

                <div class="converter-group">
                    <label>
                        <input type="checkbox" id="ayah" onchange="toggleWarisInput('ayah')"> Ayah
                    </label>
                </div>

                <div class="converter-group">
                    <label>
                        <input type="checkbox" id="ibu" onchange="toggleWarisInput('ibu')"> Ibu
                    </label>
                </div>

                <div class="converter-group">
                    <label>
                        <input type="checkbox" id="anakLaki" onchange="toggleWarisInput('anakLaki')"> Anak Laki-laki
                    </label>
                    <input type="number" id="anakLakiJumlah" style="display:none; margin-top:5px;" placeholder="Jumlah" value="1" min="1">
                </div>

                <div class="converter-group">
                    <label>
                        <input type="checkbox" id="anakPerempuan" onchange="toggleWarisInput('anakPerempuan')"> Anak Perempuan
                    </label>
                    <input type="number" id="anakPerempuanJumlah" style="display:none; margin-top:5px;" placeholder="Jumlah" value="1" min="1">
                </div>

                <div class="converter-group">
                    <label>
                        <input type="checkbox" id="saudaraLaki" onchange="toggleWarisInput('saudaraLaki')"> Saudara Laki-laki Kandung
                    </label>
                    <input type="number" id="saudaraLakiJumlah" style="display:none; margin-top:5px;" placeholder="Jumlah" value="1" min="1">
                </div>

                <div class="converter-group">
                    <label>
                        <input type="checkbox" id="saudaraPerempuan" onchange="toggleWarisInput('saudaraPerempuan')"> Saudara Perempuan Kandung
                    </label>
                    <input type="number" id="saudaraPerempuanJumlah" style="display:none; margin-top:5px;" placeholder="Jumlah" value="1" min="1">
                </div>

                <button class="convert-btn" onclick="hitungWaris()">Hitung Waris</button>
                <div id="warisResult" style="margin-top: 20px;"></div>
            </div>
        </div>
    </div>

    <script>
        let currentInput = '0';
        let operator = '';
        let previousValue = '';

        function switchTab(tabName) {
            // Hide all tabs
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));

            // Remove active class from all tab buttons
            const tabButtons = document.querySelectorAll('.tab');
            tabButtons.forEach(btn => btn.classList.remove('active'));

            // Show selected tab
            document.getElementById(tabName).classList.add('active');

            // Add active class to clicked button
            event.target.classList.add('active');
        }

        // Scientific Calculator Functions
        function updateDisplay() {
            document.getElementById('display').textContent = currentInput || '0';
        }

        function appendNumber(num) {
            if (currentInput === '0' && num !== '.') {
                currentInput = num;
            } else {
                currentInput += num;
            }
            updateDisplay();
        }

        function appendOperator(op) {
            currentInput += op;
            updateDisplay();
        }

        function clearDisplay() {
            currentInput = '0';
            operator = '';
            previousValue = '';
            updateDisplay();
        }

        function deleteLast() {
            currentInput = currentInput.slice(0, -1) || '0';
            updateDisplay();
        }

        function calculate() {
            try {
                // Replace ^ with ** for power operation
                let expression = currentInput.replace(/\^/g, '**');
                let result = eval(expression);
                // Hilangkan desimal jika hasil bulat
                currentInput = (result % 1 === 0 ? result : result.toFixed(2)).toString();
                updateDisplay();
            } catch (error) {
                currentInput = 'Error';
                updateDisplay();
                setTimeout(() => {
                    currentInput = '0';
                    updateDisplay();
                }, 1500);
            }
        }

        function calculateSin() {
            try {
                let value = parseFloat(currentInput);
                let result = Math.sin(value * Math.PI / 180);
                currentInput = (result % 1 === 0 ? result : result.toFixed(2)).toString();
                updateDisplay();
            } catch (error) {
                currentInput = 'Error';
                updateDisplay();
            }
        }

        function calculateCos() {
            try {
                let value = parseFloat(currentInput);
                let result = Math.cos(value * Math.PI / 180);
                currentInput = (result % 1 === 0 ? result : result.toFixed(2)).toString();
                updateDisplay();
            } catch (error) {
                currentInput = 'Error';
                updateDisplay();
            }
        }

        function calculateTan() {
            try {
                let value = parseFloat(currentInput);
                let result = Math.tan(value * Math.PI / 180);
                currentInput = (result % 1 === 0 ? result : result.toFixed(2)).toString();
                updateDisplay();
            } catch (error) {
                currentInput = 'Error';
                updateDisplay();
            }
        }

        function calculateSqrt() {
            try {
                let value = parseFloat(currentInput);
                let result = Math.sqrt(value);
                currentInput = (result % 1 === 0 ? result : result.toFixed(2)).toString();
                updateDisplay();
            } catch (error) {
                currentInput = 'Error';
                updateDisplay();
            }
        }

        function calculateSquare() {
            try {
                let value = parseFloat(currentInput);
                let result = value * value;
                currentInput = (result % 1 === 0 ? result : result.toFixed(2)).toString();
                updateDisplay();
            } catch (error) {
                currentInput = 'Error';
                updateDisplay();
            }
        }

        function calculatePercent() {
            try {
                let value = parseFloat(currentInput);
                let result = value / 100;
                currentInput = (result % 1 === 0 ? result : result.toFixed(2)).toString();
                updateDisplay();
            } catch (error) {
                currentInput = 'Error';
                updateDisplay();
            }
        }

        // Konversi Panjang
        function convertPanjang() {
            const value = parseFloat(document.getElementById('panjangInput').value);
            const from = document.getElementById('panjangFrom').value;
            const to = document.getElementById('panjangTo').value;

            if (isNaN(value)) {
                alert('Masukkan nilai yang valid!');
                return;
            }

            // Konversi ke meter dulu (base unit)
            let meters;
            switch(from) {
                case 'km': meters = value * 1000; break;
                case 'm': meters = value; break;
                case 'cm': meters = value / 100; break;
            }

            // Konversi dari meter ke unit tujuan
            let result;
            switch(to) {
                case 'km': result = meters / 1000; break;
                case 'm': result = meters; break;
                case 'cm': result = meters * 100; break;
            }

            const resultDiv = document.getElementById('panjangResult');
            // Hilangkan desimal jika hasil bulat
            const displayResult = result % 1 === 0 ? result : result.toFixed(2);
            resultDiv.textContent = `${value} ${from} = ${displayResult} ${to}`;
            resultDiv.classList.add('show');
        }

        // Konversi Berat
        function convertBerat() {
            const value = parseFloat(document.getElementById('beratInput').value);
            const from = document.getElementById('beratFrom').value;
            const to = document.getElementById('beratTo').value;

            if (isNaN(value)) {
                alert('Masukkan nilai yang valid!');
                return;
            }

            // Konversi ke gram dulu (base unit)
            let grams;
            switch(from) {
                case 'ton': grams = value * 1000000; break;
                case 'kwintal': grams = value * 100000; break;
                case 'kg': grams = value * 1000; break;
                case 'g': grams = value; break;
            }

            // Konversi dari gram ke unit tujuan
            let result;
            switch(to) {
                case 'ton': result = grams / 1000000; break;
                case 'kwintal': result = grams / 100000; break;
                case 'kg': result = grams / 1000; break;
                case 'g': result = grams; break;
            }

            const resultDiv = document.getElementById('beratResult');
            // Hilangkan desimal jika hasil bulat
            const displayResult = result % 1 === 0 ? result : result.toFixed(2);
            resultDiv.textContent = `${value} ${from} = ${displayResult} ${to}`;
            resultDiv.classList.add('show');
        }

        // Kalkulator Waris Islam
        function toggleWarisInput(id) {
            const checkbox = document.getElementById(id);
            const input = document.getElementById(id + 'Jumlah');
            
            if (input) {
                input.style.display = checkbox.checked ? 'block' : 'none';
            }
        }

        function hitungWaris() {
            const totalHarta = parseFloat(document.getElementById('totalHarta').value);
            
            if (isNaN(totalHarta) || totalHarta <= 0) {
                alert('Masukkan total harta yang valid!');
                return;
            }

            // Ambil data ahli waris
            const ahliWaris = {
                suami: document.getElementById('suami').checked,
                istri: document.getElementById('istri').checked,
                ayah: document.getElementById('ayah').checked,
                ibu: document.getElementById('ibu').checked,
                anakLaki: document.getElementById('anakLaki').checked,
                anakPerempuan: document.getElementById('anakPerempuan').checked,
                saudaraLaki: document.getElementById('saudaraLaki').checked,
                saudaraPerempuan: document.getElementById('saudaraPerempuan').checked
            };

            const jumlah = {
                istri: ahliWaris.istri ? parseInt(document.getElementById('istriJumlah').value) || 1 : 0,
                anakLaki: ahliWaris.anakLaki ? parseInt(document.getElementById('anakLakiJumlah').value) || 1 : 0,
                anakPerempuan: ahliWaris.anakPerempuan ? parseInt(document.getElementById('anakPerempuanJumlah').value) || 1 : 0,
                saudaraLaki: ahliWaris.saudaraLaki ? parseInt(document.getElementById('saudaraLakiJumlah').value) || 1 : 0,
                saudaraPerempuan: ahliWaris.saudaraPerempuan ? parseInt(document.getElementById('saudaraPerempuanJumlah').value) || 1 : 0
            };

            // Hitung pembagian waris
            let pembagian = [];
            let sisaHarta = totalHarta;

            // Ada anak
            const adaAnak = ahliWaris.anakLaki || ahliWaris.anakPerempuan;

            // 1. Suami
            if (ahliWaris.suami) {
                let bagianSuami = adaAnak ? totalHarta * 0.25 : totalHarta * 0.5;
                pembagian.push({
                    nama: 'Suami',
                    jumlah: 1,
                    bagian: adaAnak ? '1/4' : '1/2',
                    nominal: bagianSuami
                });
                sisaHarta -= bagianSuami;
            }

            // 2. Istri
            if (ahliWaris.istri) {
                let bagianIstri = adaAnak ? totalHarta * 0.125 : totalHarta * 0.25;
                let bagianPerIstri = bagianIstri / jumlah.istri;
                pembagian.push({
                    nama: 'Istri',
                    jumlah: jumlah.istri,
                    bagian: adaAnak ? '1/8' : '1/4',
                    nominal: bagianIstri,
                    perOrang: bagianPerIstri
                });
                sisaHarta -= bagianIstri;
            }

            // 3. Ayah
            if (ahliWaris.ayah) {
                let bagianAyah;
                if (adaAnak) {
                    bagianAyah = totalHarta * (1/6);
                    pembagian.push({
                        nama: 'Ayah',
                        jumlah: 1,
                        bagian: '1/6',
                        nominal: bagianAyah
                    });
                } else {
                    // Ayah dapat sisa jika tidak ada anak
                    bagianAyah = sisaHarta;
                    pembagian.push({
                        nama: 'Ayah',
                        jumlah: 1,
                        bagian: 'Ashabah (Sisa)',
                        nominal: bagianAyah
                    });
                }
                sisaHarta -= bagianAyah;
            }

            // 4. Ibu
            if (ahliWaris.ibu) {
                let bagianIbu;
                if (adaAnak || (ahliWaris.saudaraLaki && jumlah.saudaraLaki >= 2) || (ahliWaris.saudaraPerempuan && jumlah.saudaraPerempuan >= 2)) {
                    bagianIbu = totalHarta * (1/6);
                    pembagian.push({
                        nama: 'Ibu',
                        jumlah: 1,
                        bagian: '1/6',
                        nominal: bagianIbu
                    });
                } else {
                    bagianIbu = totalHarta * (1/3);
                    pembagian.push({
                        nama: 'Ibu',
                        jumlah: 1,
                        bagian: '1/3',
                        nominal: bagianIbu
                    });
                }
                sisaHarta -= bagianIbu;
            }

            // 5. Anak-anak (bagian ashabah - sisa harta)
            if (adaAnak && sisaHarta > 0) {
                // Anak laki-laki mendapat 2x anak perempuan
                let totalBagian = (jumlah.anakLaki * 2) + jumlah.anakPerempuan;
                let bagianPerUnit = sisaHarta / totalBagian;

                if (ahliWaris.anakLaki) {
                    let bagianAnakLaki = bagianPerUnit * 2 * jumlah.anakLaki;
                    pembagian.push({
                        nama: 'Anak Laki-laki',
                        jumlah: jumlah.anakLaki,
                        bagian: 'Ashabah (2x anak perempuan)',
                        nominal: bagianAnakLaki,
                        perOrang: bagianPerUnit * 2
                    });
                }

                if (ahliWaris.anakPerempuan) {
                    let bagianAnakPerempuan = bagianPerUnit * jumlah.anakPerempuan;
                    pembagian.push({
                        nama: 'Anak Perempuan',
                        jumlah: jumlah.anakPerempuan,
                        bagian: jumlah.anakLaki > 0 ? 'Ashabah (1x)' : (jumlah.anakPerempuan === 1 ? '1/2' : '2/3'),
                        nominal: bagianAnakPerempuan,
                        perOrang: bagianPerUnit
                    });
                }
                sisaHarta = 0;
            } else if (ahliWaris.anakPerempuan && !ahliWaris.anakLaki) {
                // Anak perempuan saja tanpa anak laki-laki
                let bagianAnakPerempuan;
                if (jumlah.anakPerempuan === 1) {
                    bagianAnakPerempuan = totalHarta * 0.5;
                    pembagian.push({
                        nama: 'Anak Perempuan',
                        jumlah: 1,
                        bagian: '1/2',
                        nominal: bagianAnakPerempuan
                    });
                } else {
                    bagianAnakPerempuan = totalHarta * (2/3);
                    pembagian.push({
                        nama: 'Anak Perempuan',
                        jumlah: jumlah.anakPerempuan,
                        bagian: '2/3',
                        nominal: bagianAnakPerempuan,
                        perOrang: bagianAnakPerempuan / jumlah.anakPerempuan
                    });
                }
                sisaHarta -= bagianAnakPerempuan;
            }

            // 6. Saudara kandung (jika tidak ada anak dan tidak ada ayah)
            if (!adaAnak && !ahliWaris.ayah && sisaHarta > 0) {
                if (ahliWaris.saudaraLaki || ahliWaris.saudaraPerempuan) {
                    let totalBagian = (jumlah.saudaraLaki * 2) + jumlah.saudaraPerempuan;
                    let bagianPerUnit = sisaHarta / totalBagian;

                    if (ahliWaris.saudaraLaki) {
                        let bagianSaudaraLaki = bagianPerUnit * 2 * jumlah.saudaraLaki;
                        pembagian.push({
                            nama: 'Saudara Laki-laki Kandung',
                            jumlah: jumlah.saudaraLaki,
                            bagian: 'Ashabah (2x saudara perempuan)',
                            nominal: bagianSaudaraLaki,
                            perOrang: bagianPerUnit * 2
                        });
                    }

                    if (ahliWaris.saudaraPerempuan) {
                        let bagianSaudaraPerempuan = bagianPerUnit * jumlah.saudaraPerempuan;
                        pembagian.push({
                            nama: 'Saudara Perempuan Kandung',
                            jumlah: jumlah.saudaraPerempuan,
                            bagian: 'Ashabah (1x)',
                            nominal: bagianSaudaraPerempuan,
                            perOrang: bagianPerUnit
                        });
                    }
                    sisaHarta = 0;
                }
            }

            // Tampilkan hasil
            displayWarisResult(pembagian, totalHarta, sisaHarta);
        }

        function displayWarisResult(pembagian, totalHarta, sisaHarta) {
            const resultDiv = document.getElementById('warisResult');
            
            if (pembagian.length === 0) {
                resultDiv.innerHTML = '<div class="result show">Tidak ada ahli waris yang dipilih!</div>';
                return;
            }

            let html = '<div style="background: #f8f9fa; padding: 15px; border-radius: 10px; margin-bottom: 15px;">';
            html += `<h4 style="color: #667eea; margin-bottom: 10px;">Total Harta: Rp ${Math.round(totalHarta).toLocaleString('id-ID')}</h4>`;
            html += '</div>';

            pembagian.forEach(item => {
                html += '<div class="waris-result-item">';
                html += `<h4>${item.nama} ${item.jumlah > 1 ? `(${item.jumlah} orang)` : ''}</h4>`;
                html += `<p>Bagian: ${item.bagian}</p>`;
                html += `<p class="bagian">Total: Rp ${Math.round(item.nominal).toLocaleString('id-ID')}</p>`;
                if (item.perOrang) {
                    html += `<p style="color: #28a745;">Per orang: Rp ${Math.round(item.perOrang).toLocaleString('id-ID')}</p>`;
                }
                html += '</div>';
            });

            if (sisaHarta > 0) {
                html += '<div style="background: #fff3cd; padding: 15px; border-radius: 10px; margin-top: 15px;">';
                html += `<p style="color: #856404; font-weight: bold;">Sisa Harta: Rp ${Math.round(sisaHarta).toLocaleString('id-ID')}</p>`;
                html += '<p style="color: #856404; font-size: 12px; margin-top: 5px;">*Sisa harta dapat dibagikan sebagai ashabah atau sesuai ketentuan lebih lanjut</p>';
                html += '</div>';
            }

            html += '<div style="background: #d1ecf1; padding: 15px; border-radius: 10px; margin-top: 15px; font-size: 12px;">';
            html += '<p style="color: #0c5460; margin: 0;"><strong>Catatan:</strong> Perhitungan ini adalah perhitungan sederhana berdasarkan hukum waris Islam. Untuk kasus yang lebih kompleks atau penentuan yang lebih akurat, disarankan untuk berkonsultasi dengan ahli waris atau ulama.</p>';
            html += '</div>';

            resultDiv.innerHTML = html;
        }
    </script>
</body>
</html>
